<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FACOMS JournalSys</title>
  <link rel="stylesheet" href="{{ url_for('journal.static', filename='styles.css') }}">
</head>
<body>
  <nav class="nav">
    <!-- FIXED: was public.landing -->
    <a href="{{ url_for('journal.home') }}" class="brand">FACOMS Journal</a>
    <div class="links">
      {% if current_user.is_authenticated %}
        <a href="{{ url_for('journal.dashboard') }}">Dashboard</a>
        <a href="{{ url_for('journal.submit') }}">New Submission</a>
        {% if current_user.role.value == 'reviewer' %}
          <a href="{{ url_for('journal.reviewer_queue') }}">Reviewer Queue</a>
        {% endif %}
        {% if current_user.role.value == 'admin' %}
          <a href="{{ url_for('journal.admin_submissions') }}">Admin Panel</a>
        {% endif %}
        <a href="{{ url_for('journal.logout') }}">Logout</a>
      {% else %}
        <a href="{{ url_for('journal.login') }}">Login</a>
        <a href="{{ url_for('journal.register') }}">Register</a>
      {% endif %}
      <a href="{{ url_for('journal.issues') }}">Issues</a>
    </div>
  </nav>

  <main class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="flash {{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    {% block body %}
      {% if current_user.is_authenticated %}
        <h2>Welcome, {{ current_user.username }}!</h2>
      {% else %}
        <h2>FACOMS Journal Submission System</h2>
        <p>Submit, review, and manage manuscripts for the Faculty of Computing & Mathematical Sciences.</p>
      {% endif %}
    {% endblock %}
  </main>
</body>
</html>
