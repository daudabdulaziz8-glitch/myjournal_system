{% extends "base.html" %}

{% block body %}
<div class="submission-detail">

  <!-- Sidebar -->
  <aside class="reviewer-sidebar">
    <h3>Author Panel</h3>
    <ul>
      <li><a href="{{ url_for('journal.dashboard') }}">🏠 My Dashboard</a></li>
      <li><a href="{{ url_for('journal.submit') }}">📄 New Submission</a></li>
      <li><a href="{{ url_for('journal.submissions') }}">📑 My Submissions</a></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <section class="reviewer-content">
    <h2>Submission #{{ submission.id }} – {{ submission.title }}</h2>

    <!-- Metadata -->
    <div class="card">
      <h3>Manuscript Details</h3>
      <p><strong>Abstract:</strong> {{ submission.abstract }}</p>
      <p><strong>Keywords:</strong> {{ submission.keywords }}</p>
      <p><strong>Authors:</strong> {{ submission.authors_text }}</p>
      <p><strong>Department:</strong> {{ submission.department }}</p>
      <p><strong>Status:</strong> {{ submission.status.value if submission.status is defined and submission.status.value else submission.status }}</p>
      <p><strong>Created:</strong> {{ submission.created_at.strftime('%Y-%m-%d') if submission.created_at else '' }}</p>
      <a href="{{ url_for('journal.download_submission', submission_id=submission.id) }}" class="btn-secondary">⬇ Download PDF</a>
    </div>

    <!-- Reviews -->
    <div class="card">
      <h3>Reviews</h3>
      {% if reviews %}
        {% for r in reviews %}
        <div class="review-block">
          <p><strong>Reviewer:</strong> {{ r.reviewer.username if r.reviewer else "Unknown" }}</p>
          <p><strong>Decision:</strong> {{ r.decision.value if r.decision is defined and r.decision.value else r.decision }}</p>
          <p><strong>Score:</strong> {{ r.score }}</p>
          <p><strong>Comments:</strong> {{ r.comment }}</p>
          <hr>
        </div>
        {% endfor %}
      {% else %}
        <p>No reviews submitted yet.</p>
      {% endif %}
    </div>
  </section>
</div>
{% endblock %}
